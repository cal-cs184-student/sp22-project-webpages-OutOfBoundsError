<html>
	<head>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" href="./styles.css">
	</head>
	<body>
		<div id="container">

			<h1>Project 2: Mesh Edit</h1>
			<a href="https://cal-cs184-student.github.io/sp22-project-webpages-OutOfBoundsError/proj2/index.html">Write up Link </a>
			<div id="divider">

			</div>

			<div>
				<h2>Task 1: Bezier Curves with 1D de Casteljau Subdivision</h2>
				<ul>
					<li>
						De Casteljau's algorithm is a recursive method whih evaluates polynomial which create bezier curves. 
					</li>
					<li>
						In my implementation, I created a helper function which evaluates thE lerp of the positions of the points, then, I loop in contiguous pairs of points and lerping the 2 points and then
						storing in our nextLevel vector. This, reduces the number of points in half which creates a nice smooth curve. 
					</li>

					<figure class="figure">
						<img src="./p2t1a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">One step</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t1b.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Two step</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t1c.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Three step</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t1d.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Four step</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t1e.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Five step</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t1f.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Moved the first point to the last points</figcaption>
					</figure>

				</ul>
			</div>

			<div>
				<h2>Task 2: Bezier Surfaces with Separable 1D de Casteljau</h2>
				<ul>
					<li>
						To extend it to surfaces, we modify our evaluate function to lerp 3D vectors instead of 2D. To get nice surfaces, we have to evaluate until we only have one point, thus, we evaluate with the parameter u and then v to get nice curve surfaces. 
					</li>
					
					<figure class="figure">
						<img src="./p2t2.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Supersampling rate: 1</figcaption>
					</figure>
				</ul>
			</div>
			<div>
				<h2>Task 3:  Area-Weighted Vertex Normals</h2>
				<ul>
					<li>
						I did a halfedge traversal around the current vertex by using the next() and twin() point. During this traversal, I summed up all of its face normals. Then, returned the result as a unit vector.
					</li>
					<figure class="figure">
						<img src="./p2t3a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">flat shading</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t3b.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Phong shading</figcaption>
					</figure>
				</ul>
			</div>
			<div>
				<h2>Task 4: Edge flip</h2>
				<ul>
					<li>
						I followed the edge flip diagram shared on piazza to implement the edge flip functionality. First, I get all the components that I will modify (edges, vertices, faces, half edges). Then, assigned them using setNeighbors following
						the diagram, and also update all of the halfedges of vertices, faces, and edges.
					</li>
					<figure class="figure">
						<img src="./p2t4b.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">No flips</figcaption>
					</figure>
					<br/>
					<figure class="figure">
						<img src="./p2t4a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">A few flip</figcaption>
					</figure>
				</ul>
			</div>
			<div>
				<h2>Task 5: Edge split</h2>
				<ul>
					<li>
						Similar to Task 4, I found that drawing a diagram with the halfedges, edges, vertices, and faces is extremely helpful for the implementation.
					</li>
					<li>
						First, I got all the components I needed (Half edges, vertices, edges, faces), and also created the 3 new edges, 6 half edges, 2 new faces, and 1 new vertex.
					</li>
					<li>
						Then, I just assigned all the neighbors and half edges based on the diagram.
					</li>
					
					<figure class="figure">
						<img src="./p2t5a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Orginal Mesh</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t5b.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Only splits</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t5a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Original Mesh</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t5c.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Flips and splits</figcaption>
					</figure>
				</ul>
			</div>
			<div>
				<h2>Task 6: Loop Subdivision for Mesh Upsampling</h2>
				<ul>
					<li>
						To implement upsampling, I followed the recommendation in the comments.
					</li>
					<li>
						First, I compute the new positions of all the vertices by going through all vertex of the mesh and also all the neighboring vertex position of each vertex.
						Then, I apply the formula provided in the spec.
					</li>
					<li>
						Then, I compute the position of the new midpoint after we split the nodes and store it in the edges->newPosition
					</li>
					<li>
						Then, we split every edge in the original mesh and also mark the edges that need to be flipped. 
					</li>
					<li>
						Finally, we flipped all the new edges and update the vertex positions to the new positions.
					</li>
					<li>
						The reason that the cube subdivides asymmetrically is due to the initial mesh where the faces have the diagonal split. This causes the middle of the cube
						to asymmetrically split when we run our subdivision. To make it more symmetrical, we can either make all the faces have the same split by splitting all of the faces once before
						we run the subdivision algorithm, or we make sure that the middle faces are split and the left and right face have the same mesh pattern. 
					</li>
					
					<figure class="figure">
						<img src="./p2t6a.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">No subdivision</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6b.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">One Upsampling call</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6c.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Two Upsampling call</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6d.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Three Upsampling call</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6e.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Four Upsampling calling</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6f.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Pre-processed cube</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6g.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">One Upsampling calll</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6h.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Two Upsampling call</figcaption>
					</figure>
					<figure class="figure">
						<img src="./p2t6i.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
						<figcaption class="figure-caption">Three Upsampling calling</figcaption>
					</figure>
				</ul>
			</div>


		</div>
		
	</body>
</html>